(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5914:function(e,l,s){Promise.resolve().then(s.bind(s,7826))},7826:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return K}});var n=s(3827),a=s(4090),i=s(784),t=s(3167),c=s(1367);function r(){for(var e=arguments.length,l=Array(e),s=0;s<e;s++)l[s]=arguments[s];return(0,c.m6)((0,t.Z)(...l))}var o=s(2840);function d(e){return(0,n.jsxs)("form",{className:r("flex realtive items-center justify-center h-10",e.className),onSubmit:e.onSubmit,children:[(0,n.jsx)("input",{onChange:e.onChange,value:e.value,type:"text",placeholder:"Search location...",className:"px-4 py-2 w-[230px] border border-gray-300 rounded-l-md focus:outline-none focus:border-blue-500 h-full"}),(0,n.jsx)("button",{className:"px-4 py-[9px] bg-blue-500 text-white rounded-r-md focus:outline-none hover:bg-blue-600 h-full",children:(0,n.jsx)(o.eaK,{})})]})}var x=s(7908),u=s(8757),m=s(7807);let p=(0,m.cn)("Republic of Cuba"),h=(0,m.cn)(!1);function v(e){let{location:l}=e,[s,t]=(0,a.useState)(""),[c,r]=(0,a.useState)(""),[o,m]=(0,a.useState)([]),[v,j]=(0,a.useState)(!1),[g,N]=(0,u.KO)(p),[w,y]=(0,u.KO)(h);async function b(e){if(t(e),e.length>=3)try{let l=(await x.Z.get("https://api.openweathermap.org/data/2.5/find?q=".concat(e,"&appid=").concat("4a4315618da3248793ae618313350f32"))).data.list.map(e=>e.name);m(l),r(""),j(!0)}catch(e){m([]),j(!1)}else m([]),j(!1)}function _(e){y(!0),e.preventDefault(),0==o.length?(r("Location not found"),setTimeout(()=>r(""),3e3),y(!1)):(r(""),setTimeout(()=>{y(!1),N(s),j(!1)},500))}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("nav",{className:"shadow-sm sticky top-0 left-0 z-50 bg-white",children:(0,n.jsxs)("div",{className:"h-[80px] w-full flex justify-between items-center max-w-7xl px-3 mx-auto",children:[(0,n.jsxs)("h2",{className:"flex items-center justify-center gap-7",children:[(0,n.jsx)("p",{className:"text-gray-500 text-3xl",children:"Weather"}),(0,n.jsx)(i.sBz,{className:"text-3xl mt-1 text-yellow-300"})]}),(0,n.jsxs)("section",{className:"flex gap-2 items-center",children:[(0,n.jsx)(i.x$F,{onClick:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(async e=>{let{latitude:l,longitude:s}=e.coords;try{y(!0);let e=await x.Z.get("https://api.openweathermap.org/data/2.5/weather?lat=".concat(l,"&lon=").concat(s,"&appid=").concat("4a4315618da3248793ae618313350f32"));setTimeout(()=>{y(!1),N(e.data.name)},500)}catch(e){y(!1)}})},title:"Your Current Location",className:"text-2xl text-gray-400 hover:opacity-80 cursor-pointer"}),(0,n.jsx)(i.NK0,{className:"text-3xl"}),(0,n.jsxs)("p",{className:"text-slate-900/80 text-sm",children:[" ",l," "]}),(0,n.jsxs)("div",{className:"relative  hidden md:flex",children:[(0,n.jsx)(d,{value:s,onChange:e=>b(e.target.value),onSubmit:_}),(0,n.jsx)(f,{showSuggestion:v,suggestion:o,error:c,handleSuggestionClick:e=>{t(e),j(!1)}})]})]})]})}),(0,n.jsx)("section",{className:"flex max-w-7xl px-3 md:hidden",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(d,{value:s,onChange:e=>b(e.target.value),onSubmit:_}),(0,n.jsx)(f,{showSuggestion:v,suggestion:o,error:c,handleSuggestionClick:e=>{t(e),j(!1)}})]})})]})}function f(e){let{showSuggestion:l,suggestion:s,handleSuggestionClick:a,error:i}=e;return(0,n.jsx)(n.Fragment,{children:(l&&s.length>1||i)&&(0,n.jsxs)("ul",{className:"mb-4 bg-white absolute border top-[44px] left-0 border-gray-300 rounded-md min-w-[200px] flex flex-col gap-1 py-2 px-2",children:[i&&s.length<1&&(0,n.jsx)("li",{className:"p-1 text-red-500",children:i}),s.map((e,l)=>(0,n.jsx)("li",{onClick:()=>a(e),className:"cursor-pointer p-1 rounded hover:bg-gray-200",children:e},l))]})})}var j=s(5230),g=s(2148),N=s(8716),w=s(7924);function y(e){return(0,n.jsx)("div",{...e,className:r("w-full bg-white border rounded-xl flex py-4 shadow-sm",e.className)})}function b(e){return Math.floor(e-273.15)}var _=s(703);function Z(e){return(0,n.jsx)("div",{title:e.iconName,...e,className:r("relative h-20 w-20"),children:(0,n.jsx)(_.default,{width:100,height:100,alt:"weather-icon",className:"absolute h-full w-full",src:"https://openweathermap.org/img/wn/".concat(e.iconName,"@4x.png")})})}function k(e,l){let s=new Date(l).getHours();return s>=6&&s<18?e.replace(/.$/,"d"):e.replace(/.$/,"n")}var S=s(1709),C=s(6173),E=s(1040);function P(e){let{visibility:l="25km",humidity:s="61%",windSpeed:a="7 km/h",airPressure:t="1012 hPa",sunrise:c="6.20",sunset:r="18:48"}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F,{icon:(0,n.jsx)(S.Lr9,{}),information:"Visability",value:l}),(0,n.jsx)(F,{icon:(0,n.jsx)(C.YF6,{}),information:"Humidity",value:s}),(0,n.jsx)(F,{icon:(0,n.jsx)(i.RGM,{}),information:"Wind speed",value:a}),(0,n.jsx)(F,{icon:(0,n.jsx)(E.Pdk,{}),information:"Air Pressure",value:t}),(0,n.jsx)(F,{icon:(0,n.jsx)(S.pMX,{}),information:"Sunrise",value:c}),(0,n.jsx)(F,{icon:(0,n.jsx)(S.UwN,{}),information:"Sunset",value:r})]})}function F(e){return(0,n.jsxs)("div",{className:"flex flex-col justify-between gap-2 items-center text-xs font-semibold text-black/80",children:[(0,n.jsx)("p",{className:"whitespace-nowrap",children:e.information}),(0,n.jsx)("div",{className:"text-3xl",children:e.icon}),(0,n.jsx)("p",{children:e.value})]})}function M(e){return"".concat((e/1e3).toFixed(0),"km")}function O(e){return"".concat(Math.round(3.6*e)," km/h")}function D(e){var l,s;return(0,n.jsxs)(y,{className:"gap-4",children:[(0,n.jsxs)("section",{className:"flex gap-4 items-center px-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1 items-center",children:[(0,n.jsx)(Z,{iconName:e.weatherIcon}),(0,n.jsx)("p",{children:e.date}),(0,n.jsx)("p",{className:"text-sm",children:e.day})]}),(0,n.jsxs)("div",{className:"flex flex-col px-4 items-center",children:[(0,n.jsxs)("span",{className:"text-5xl",children:[b(null!==(l=e.temp)&&void 0!==l?l:0),"\xb0"]}),(0,n.jsxs)("p",{className:"text-xs space-x-1 whitespace-nowrap",children:[(0,n.jsx)("span",{children:"Feels like"}),(0,n.jsx)("span",{children:b(null!==(s=e.feels_like)&&void 0!==s?s:0)})]}),(0,n.jsx)("p",{className:"capitalize",children:e.description})]})]}),(0,n.jsx)("section",{className:"overflow-x-auto flex justify-between gap-4 px-4 w-full pr-10",children:(0,n.jsx)(P,{...e})})]})}function K(){var e,l,s,i,t,c,r,o,d,m,f,_,S;let[C,E]=(0,u.KO)(p),[F,K]=(0,u.KO)(h),{isLoading:I,error:T,data:z,refetch:L}=(0,j.useQuery)("repoData",async()=>{let{data:e}=await x.Z.get("http://api.openweathermap.org/data/2.5/forecast?q=".concat(C,"&APPID=").concat("4a4315618da3248793ae618313350f32"));return e});(0,a.useEffect)(()=>{console.log("place",C),L()},[C,L]);let A=null==z?void 0:z.list[0];console.log("data",z);let $=[...new Set(null==z?void 0:z.list.map(e=>new Date(1e3*e.dt).toISOString().split("T")[0]))].map(e=>null==z?void 0:z.list.find(l=>{let s=new Date(1e3*l.dt).toISOString().split("T")[0],n=new Date(1e3*l.dt).getHours();return s===e&&n>=6}));return I?(0,n.jsx)("div",{className:"flex items-center min-h-screen justify-center",children:(0,n.jsx)("p",{className:"animate-bounce",children:"Loading..."})}):(0,n.jsxs)("div",{className:"flex flex-col gap-4 bg-gray-100 min-h-screen",children:[(0,n.jsx)(v,{location:null!==(e=null==z?void 0:z.city.name)&&void 0!==e?e:""}),(0,n.jsx)("main",{className:"px-3 max-w-7xl mx-auto flex flex-col gap-9 w-full pb-10 pt-4",children:F?(0,n.jsx)(H,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("h2",{className:"flex gap-1 text-2xl items-end",children:[(0,n.jsx)("p",{children:(0,g.Z)((0,N.Z)(null!==(l=null==A?void 0:A.dt_txt)&&void 0!==l?l:""),"EEEE")}),(0,n.jsxs)("p",{className:"text-lg",children:["(",(0,g.Z)((0,N.Z)(null!==(s=null==A?void 0:A.dt_txt)&&void 0!==s?s:""),"dd.MM.yyyy"),")"]})]}),(0,n.jsxs)(y,{className:"gap-10 px-6 items-center",children:[(0,n.jsxs)("div",{className:"flex flex-col px-4",children:[(0,n.jsxs)("span",{className:"text-5xl",children:[b(null!==(i=null==A?void 0:A.main.temp)&&void 0!==i?i:0),"\xb0"]}),(0,n.jsxs)("p",{className:"text-xs space-x-1 whitespace-nowrap",children:[(0,n.jsx)("span",{children:"Feels like"}),(0,n.jsxs)("span",{children:[b(null!==(t=null==A?void 0:A.main.feels_like)&&void 0!==t?t:0),"\xb0"]})]}),(0,n.jsxs)("p",{className:"text-xs space-x-2",children:[(0,n.jsxs)("span",{children:[b(null!==(c=null==A?void 0:A.main.temp_min)&&void 0!==c?c:0),"\xb0↓"," "]}),(0,n.jsxs)("span",{children:[" ",b(null!==(r=null==A?void 0:A.main.temp_max)&&void 0!==r?r:0),"\xb0↑"]})]})]}),(0,n.jsx)("div",{className:"flex gap-10 sm:gap-16 overflow-x-auto w-full justify-between pr-3",children:null==z?void 0:z.list.map((e,l)=>{var s,a;return(0,n.jsxs)("div",{className:"flex flex-col justify-between gap-2 items-center text-sm font-semibold",children:[(0,n.jsx)("p",{className:"whitespace-nowrap",children:(0,g.Z)((0,N.Z)(null!==(s=e.dt_txt)&&void 0!==s?s:0),"h:mm a")}),(0,n.jsx)(Z,{iconName:k(null==e?void 0:e.weather[0].icon,null==e?void 0:e.dt_txt)}),(0,n.jsxs)("p",{children:[b(null!==(a=null==e?void 0:e.main.temp)&&void 0!==a?a:0),"\xb0"]})]},l)})})]})]}),(0,n.jsxs)("div",{className:"flex gap-4",children:[(0,n.jsxs)(y,{className:"w-fit justify-center flex-col px-4 items-center",children:[(0,n.jsx)("p",{className:" capitalize text-center",children:null==A?void 0:A.weather[0].description}),(0,n.jsx)(Z,{iconName:k(null!==(o=null==A?void 0:A.weather[0].icon)&&void 0!==o?o:"",null!==(d=null==A?void 0:A.dt_txt)&&void 0!==d?d:"")})]}),(0,n.jsx)(y,{className:"bg-yellow-300/80 px-6 gap-4 justify-between overflow-x-auto",children:(0,n.jsx)(P,{visibility:M(null!==(m=null==A?void 0:A.visibility)&&void 0!==m?m:0),airPressure:"".concat(null==A?void 0:A.main.pressure," hPa"),humidity:"".concat(null==A?void 0:A.main.humidity,"%"),windSpeed:O(null!==(f=null==A?void 0:A.wind.speed)&&void 0!==f?f:0),sunrise:(0,g.Z)((0,w.Z)(null!==(_=null==z?void 0:z.city.sunrise)&&void 0!==_?_:0),"h:mm"),sunset:(0,g.Z)((0,w.Z)(null!==(S=null==z?void 0:z.city.sunset)&&void 0!==S?S:0),"h:mm")})})]})]}),(0,n.jsxs)("section",{className:"flex flex-col gap-4 w-full",children:[(0,n.jsx)("p",{className:"text-2xl ",children:"Forecast (7 days)"}),$.map((e,l)=>{var s,a,i,t,c,r,o,d,x,u;return(0,n.jsx)(D,{description:null!==(s=null==e?void 0:e.weather[0].description)&&void 0!==s?s:"",weatherIcon:null!==(a=null==e?void 0:e.weather[0].icon)&&void 0!==a?a:"01d",date:e?(0,g.Z)((0,N.Z)(e.dt_txt),"dd.MM"):"",day:e?(0,g.Z)((0,N.Z)(e.dt_txt),"EEEE"):"",feels_like:null!==(i=null==e?void 0:e.main.feels_like)&&void 0!==i?i:0,temp:null!==(t=null==e?void 0:e.main.temp)&&void 0!==t?t:0,temp_max:null!==(c=null==e?void 0:e.main.temp_max)&&void 0!==c?c:0,temp_min:null!==(r=null==e?void 0:e.main.temp_min)&&void 0!==r?r:0,airPressure:"".concat(null==e?void 0:e.main.pressure," hPa"),humidity:"".concat(null==e?void 0:e.main.humidity,"% "),sunrise:(0,g.Z)((0,w.Z)(null!==(o=null==z?void 0:z.city.sunrise)&&void 0!==o?o:1702517657),"H:mm"),sunset:(0,g.Z)((0,w.Z)(null!==(d=null==z?void 0:z.city.sunset)&&void 0!==d?d:1702517657),"H:mm"),visibility:"".concat(M(null!==(x=null==e?void 0:e.visibility)&&void 0!==x?x:1e4)," "),windSpeed:"".concat(O(null!==(u=null==e?void 0:e.wind.speed)&&void 0!==u?u:1.64)," ")},l)})]})]})})]})}function H(){return(0,n.jsxs)("section",{className:"space-y-8 ",children:[(0,n.jsxs)("div",{className:"space-y-2 animate-pulse",children:[(0,n.jsxs)("div",{className:"flex gap-1 text-2xl items-end ",children:[(0,n.jsx)("div",{className:"h-6 w-24 bg-gray-300 rounded"}),(0,n.jsx)("div",{className:"h-6 w-24 bg-gray-300 rounded"})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[(0,n.jsx)("div",{className:"h-6 w-16 bg-gray-300 rounded"}),(0,n.jsx)("div",{className:"h-6 w-6 bg-gray-300 rounded-full"}),(0,n.jsx)("div",{className:"h-6 w-16 bg-gray-300 rounded"})]},e))})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 animate-pulse",children:[(0,n.jsx)("p",{className:"text-2xl h-8 w-36 bg-gray-300 rounded"}),[1,2,3,4,5,6,7].map(e=>(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 ",children:[(0,n.jsx)("div",{className:"h-8 w-28 bg-gray-300 rounded"}),(0,n.jsx)("div",{className:"h-10 w-10 bg-gray-300 rounded-full"}),(0,n.jsx)("div",{className:"h-8 w-28 bg-gray-300 rounded"}),(0,n.jsx)("div",{className:"h-8 w-28 bg-gray-300 rounded"})]},e))]})]})}}},function(e){e.O(0,[51,212,706,280,956,230,651,971,69,744],function(){return e(e.s=5914)}),_N_E=e.O()}]);